<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>SOLID设计原则 | simyy</title>
  <meta name="viewport" content="width=device-width">
  <meta name="description" content="SOLID设计原则主要用于解决如何构建可持续性的软件架构。">
<meta name="keywords" content="架构,软件设计">
<meta property="og:type" content="article">
<meta property="og:title" content="SOLID设计原则">
<meta property="og:url" content="http://simyy.cn/2019/12/21/solid-priciple/index.html">
<meta property="og:site_name" content="simyy">
<meta property="og:description" content="SOLID设计原则主要用于解决如何构建可持续性的软件架构。">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-12-21T09:26:17.483Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="SOLID设计原则">
<meta name="twitter:description" content="SOLID设计原则主要用于解决如何构建可持续性的软件架构。">
  
    <link rel="alternative" href="/atom.xml" title="simyy" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
</head></html>
<script src="/js/hexo_resize_image.js"></script>
<body>
  <div id="container">
    <div class="mobile-nav-panel">
	<i class="icon-reorder icon-large"></i>
</div>
<header id="header">
	<h1 class="blog-title">
		<a href="/">simyy</a>
	</h1>
	<nav class="nav">
		<ul>
			<li><a href="/">主页</a></li><li><a href="/2014/07/07/book-list">书单</a></li><li><a href="/archives">归档</a></li><li><a href="/tags">标签</a></li>
			<li><a id="nav-search-btn" class="nav-icon" title="Search"></a></li>
			<li><a href="/atom.xml" id="nav-rss-link" class="nav-icon" title="RSS Feed"></a></li>
		</ul>
	</nav>
	<div id="search-form-wrap">
		<form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://simyy.cn"></form>
	</div>
</header>
    <div id="main">
      


<article id="post-solid-priciple" class="post">
	<footer class="entry-meta-header">
		<span class="meta-elements date">
			<a href="/2019/12/21/solid-priciple/" class="article-date">
  <time datetime="2019-12-21T08:14:27.000Z" itemprop="datePublished">2019-12-21</time>
</a>

		</span>
        <span class="tags">
	       	
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/架构/">架构</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/软件设计/">软件设计</a></li></ul>

		</span>
		<!--span class="meta-elements author">simyy</span-->
		<div class="commentscount">
			
		</div>
	</footer>
	
	<header class="entry-header">
		
  
    <h1 class="article-title entry-title" itemprop="name">
      SOLID设计原则
    </h1>
  

	</header>
	<div class="entry-content">
		
    	<p>SOLID设计原则主要用于解决如何构建可持续性的软件架构。</p>
<a id="more"></a>
<h4 id="SRP"><a href="#SRP" class="headerlink" title="SRP"></a>SRP</h4><p><code>SRP</code>全称为<code>Single Responsibility Principle</code>，译为<code>单一职责原则</code>。</p>
<p><strong>定义：</strong></p>
<blockquote>
<p>There should never be more than one reason for a class to change.</p>
<p><code>任何一个软件模块都应该有且仅有一个被修改的原因</code>。</p>
</blockquote>
<p>在<code>Clean Architecture</code>中，重新定义如下:</p>
<blockquote>
<p><code>任何一个软件模块都应该只针对某一类行为负责</code>。</p>
</blockquote>
<p>相比之下，第二种定义更让人容易理解，因为它是站在<code>职责边界</code>的角度来分析职责的划分。</p>
<p>在面向对象的设计中，<code>高内聚、低耦合</code>是评判一个软件设计好坏的标准。</p>
<blockquote>
<p><code>内聚</code>：模块内部元素之间关联的程度。<br><code>耦合</code>：模块之间关联的程度。</p>
</blockquote>
<p><code>高内聚</code>与<code>低耦合</code>相辅相成，<code>高内聚</code>自然会带来<code>低耦合</code>的效果。</p>
<p>在软件设计层面上，<code>SRP</code>是一种抽象概念，与<code>高内聚、低耦合</code>是同样的目的，都是为了实现模块功能的职责独立。</p>
<p>“模块仅负责<code>某一类行为</code>“ 不就是<code>高内聚</code>的一种表现方式。</p>
<hr>
<blockquote>
<p>如何实现<code>SPR</code>？</p>
</blockquote>
<p>上面有提到实现<code>SPR</code>的关键在于<code>聚类行为</code>，那么行为如何聚类呢？</p>
<p>利用<code>领域驱动设计</code>的思想找到模块的边界，从而实现行为的归类。</p>
<hr>
<h4 id="OCP"><a href="#OCP" class="headerlink" title="OCP"></a>OCP</h4><p><code>OCP</code>全称为<code>Open Closed Principle</code>，译为<code>开闭原则</code>。</p>
<p><strong>定义：</strong></p>
<blockquote>
<p>Software entities (classes, modules, functions, etc.) should be open for extension, but closed for modification.</p>
<p><code>一个软件实体（如类，模块和函数）应该对扩展开放，对修改关闭。</code></p>
</blockquote>
<p><code>Open</code>对应的是<code>扩展</code>，<code>Closed</code>对应的是<code>修改</code>。</p>
<p>换一个角度来思考<code>OCP</code>，面对需求变化是否需要修改历史代码？</p>
<blockquote>
<p><code>软件设计应该通过扩展来实现变化，而不是通过修改来实现变化。</code></p>
</blockquote>
<p><code>修改</code>意味着改变原有逻辑，变化可能带来副作用，尤其对于那些年久失修、无人维护的代码来说。</p>
<p>因此，强调通过<code>扩展</code>的方式来拥抱需求变化更为合适，而这里的扩展的手段是<code>抽象化</code>。</p>
<hr>
<blockquote>
<p>如何实现<code>OCP</code>？</p>
</blockquote>
<p><code>抽象化</code>是实现<code>OCP</code>的关键，具体可以通过<code>面向接口编程</code>和<code>面向抽象编程</code>。</p>
<p>通过<code>接口和抽象</code>来限定功能范围，具体行为通过具体实现来控制（<code>多态</code>和<code>继承</code>）。</p>
<p>模块之间的依赖仅通过<code>接口和抽象</code>来关联，与具体逻辑无关，每当需求发生变更的时候，在不改变<code>接口和抽象</code>的前提下通过增加新的实现来满足需求。</p>
<hr>
<h4 id="LSP"><a href="#LSP" class="headerlink" title="LSP"></a>LSP</h4><p><code>LSP</code>全称为<code>Liskov Substitution Principle</code>，译为<code>里氏替换原则</code>。</p>
<p><strong>定义：</strong></p>
<blockquote>
<p>Functions that use pointers or references to base classes must be able to useobjects of derived classes without knowing it.</p>
<p>引用基类的地方都可以透明地使用其子类对象。</p>
</blockquote>
<p><code>LSP</code>的关键在于<code>可替换</code>。</p>
<p>在面向对象的编程方式中，<code>可替换</code>可以基于<code>继承</code>来实现。</p>
<p><code>继承</code>的特点是<code>子类</code>拥有<code>父类</code>所有堆外暴露的功能。</p>
<p>在实际情况下，<code>继承</code>的使用方式：</p>
<ul>
<li><code>代码复用</code>，父类实现共享方法，父类方法不可被重写，父类可实例化</li>
<li><code>代码复用+多态</code>，父类实现共享方法，并提供待子类实现的抽象方法，<code>父类一般为抽象类，不允许实例化</code></li>
</ul>
<p><code>LSP</code>中的<code>可替换</code>也就是多态的一种表现，通过<code>接口</code>和<code>抽象类</code>来做模块之间的关联，与模块的具体实现无关。</p>
<blockquote>
<p><code>OCP</code>和<code>LSP</code>是相辅相成的，</p>
<p>前者关注<code>扩展</code>来解决模块内部变化的问题，后者关注<code>可替换</code>来解决模块之间逻辑变化的问题。</p>
</blockquote>
<h4 id="ISP"><a href="#ISP" class="headerlink" title="ISP"></a>ISP</h4><p><code>ISP</code>全称为<code>Interface Segregation Principle</code>，译为<code>接口隔离原则</code>。</p>
<p><strong>定义：</strong></p>
<blockquote>
<p>The dependency of one class to another one should depend on the smallest possible interface.</p>
<p>类间的依赖关系应该建立在最小的接口上。</p>
</blockquote>
<p><code>ISP</code>的关键在于<code>功能的划分</code>。</p>
<p><code>ISP</code>的目的在于避免过多的功能暴露给依赖方，也就是解决<code>Fat Interface</code>。</p>
<p><code>SRP</code>的目的在于<code>职责的划分</code>，属于边界划分的范畴，而<code>ISP</code>更倾向于<code>功能聚类</code>，让依赖者不必关心不需要的功能方法。</p>
<p>职责下所涉及的功能如果太多，可以划分为多个功能聚类来简化功能的检索，不仅可以帮忙开发者更好管理功能，也可以帮忙依赖方对接口功能的划分更加清晰。</p>
<hr>
<blockquote>
<p>先满足<code>ISP</code>还是<code>SRP</code>？</p>
</blockquote>
<p>在软件设计初期需要考虑的是<code>SRP</code>，职责的划分更为重要。</p>
<p>在解决职责问题之后，在功能设计阶段就需要考虑<code>ISP</code>，包括</p>
<ul>
<li>解决<code>Fat Interface</code>的问题</li>
<li>功能方法聚类，隔离无关功能，让依赖变得更简单</li>
</ul>
<hr>
<h4 id="DIP"><a href="#DIP" class="headerlink" title="DIP"></a>DIP</h4><p><code>DIP</code>全称为<code>Dependency Inversion Principle</code>，译为<code>依赖倒置原则</code>。</p>
<p><strong>定义：</strong></p>
<blockquote>
<p>High level modules should not depend upon low level modules. Both should depend upon abstractions. Abstractions should not depend upon details. Details should depend upon abstractions.</p>
<p>高层模块不应该依赖于低层模块，两者都应该依赖于抽象；抽象不应该依赖于细节，细节应该依赖于抽象。</p>
</blockquote>
<p>当修改接口的时必然会修改实现，但修改实现不需要修改接口。</p>
<blockquote>
<p>接口比实现更稳定。</p>
</blockquote>
<p>任何具体逻辑的实现及修改和接口抽象无关，依赖方只需要关注接口是否变化，并不需要关注细节本身（这往往是分工开发中需要注意的问题）。</p>
<blockquote>
<p><code>DIP</code>是一种<code>松耦合</code>的设计原则。</p>
</blockquote>
<p><code>DIP</code>是站在抽象的角度上来建立模型，更类似于伪代码，确定整体的设计思路（模块或功能间的耦合关系）。</p>
<p><code>OCP</code>、<code>LSP</code>是具体的实现方式，通过<code>扩展</code>和<code>替换</code>来实现不同逻辑细节。</p>

    
	</div>
	
    
<nav id="article-nav">
  
    <a href="/2019/12/28/sharding/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          分库分表
        
      </div>
    </a>
  
  
    <a href="/2019/12/16/re-pro-actor/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">
        
          Reactor &amp; Proactor
        
      </div>
    </a>
  
</nav>

  
</article>







    </div>
    <div class="mb-search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Search">
    <input type="hidden" name="q" value="site:simyy.cn">
  </form>
</div>
<footer id="footer">
	<h1 class="footer-blog-title">
		<a href="/">simyy</a>
	</h1>
    &nbsp;&nbsp;
	<span class="copyright">
		&copy; 2020 simyy  Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
	</span>
</footer>

    

<script src="https://cdn.bootcss.com/jquery/2.1.3/jquery.min.js"></script>


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>